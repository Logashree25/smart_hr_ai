<mvc:View
    controllerName="smart.hr.portal.controller.EmployeeList"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.f"
    xmlns="sap.m">

    <Page id="employeeListPage" title="{i18n>employeeList}" showNavButton="true" navButtonPress="onNavBack">
        
        <!-- Page Header with Search and Filters -->
        <customHeader>
            <Bar id="employeeListHeader">
                <contentLeft>
                    <Title id="employeeListTitle" text="{i18n>employeeList}" level="H1"/>
                </contentLeft>
                <contentMiddle>
                    <SearchField id="employeeSearchField"
                                 placeholder="{i18n>searchEmployees}"
                                 search="onSearch"
                                 width="300px"/>
                </contentMiddle>
                <contentRight>
                    <Button id="filterButton"
                            icon="sap-icon://filter"
                            tooltip="{i18n>filter}"
                            press="onOpenFilterDialog"
                            type="Transparent"/>
                    <Button id="sortButton"
                            icon="sap-icon://sort"
                            tooltip="{i18n>sort}"
                            press="onOpenSortDialog"
                            type="Transparent"/>
                </contentRight>
            </Bar>
        </customHeader>
        
        <!-- Quick Filters Bar -->
        <content>
            <VBox id="quickFiltersSection" class="sapUiMediumMargin">
                <HBox id="quickFiltersBar" class="sapUiTinyMarginBottom" wrap="Wrap">
                    <Label id="quickFiltersLabel" text="{i18n>quickFilters}:" class="sapUiTinyMarginEnd sapUiTinyMarginTop"/>

                    <!-- Department Quick Filters -->
                    <Button id="allDepartmentsBtn"
                            text="{i18n>allDepartments}"
                            press="onClearFilters"
                            type="Default"
                            class="sapUiTinyMarginEnd"/>
                    <Button id="engineeringBtn"
                            text="Engineering"
                            press="onQuickFilterEngineering"
                            type="Default"
                            class="sapUiTinyMarginEnd"/>
                    <Button id="salesBtn"
                            text="Sales"
                            press="onQuickFilterSales"
                            type="Default"
                            class="sapUiTinyMarginEnd"/>
                    <Button id="marketingBtn"
                            text="Marketing"
                            press="onQuickFilterMarketing"
                            type="Default"
                            class="sapUiTinyMarginEnd"/>
                    <Button id="hrBtn"
                            text="Human Resources"
                            press="onQuickFilterHR"
                            type="Default"
                            class="sapUiTinyMarginEnd"/>

                    <!-- Clear Filters Button -->
                    <Button id="clearFiltersBtn"
                            icon="sap-icon://clear-filter"
                            text="{i18n>clearFilters}"
                            press="onClearFilters"
                            type="Transparent"
                            class="sapUiTinyMarginStart"/>
                </HBox>
            </VBox>

            <!-- Employee Table -->
            <Table id="employeeTable"
                   items="{path: '/Employees', parameters: {$expand: 'PerformanceMetrics,SurveyResponses'}}"
                   mode="SingleSelect"
                   selectionChange="onEmployeeSelect"
                   itemPress="onEmployeePress"
                   growing="true"
                   growingThreshold="50"
                   class="sapUiResponsiveMargin">
                
                <!-- Table Header -->
                <headerToolbar>
                    <Toolbar id="employeeTableToolbar">
                        <Title id="employeeTableTitle" text="{i18n>employees} ({employeeList>/totalCount})"/>
                        <ToolbarSpacer id="employeeTableSpacer"/>
                        <Button id="refreshEmployeesBtn"
                                icon="sap-icon://refresh"
                                tooltip="{i18n>refresh}"
                                press="onRefreshEmployees"
                                type="Transparent"/>
                        <Button id="addEmployeeBtn"
                                icon="sap-icon://add"
                                text="{i18n>addEmployee}"
                                press="onAddEmployee"
                                type="Emphasized"/>
                    </Toolbar>
                </headerToolbar>
                
                <!-- Table Columns -->
                <columns>
                    <Column id="nameColumn" width="20%">
                        <Text id="nameColumnHeader" text="{i18n>employeeName}"/>
                    </Column>
                    <Column id="roleColumn" width="20%">
                        <Text id="roleColumnHeader" text="{i18n>role}"/>
                    </Column>
                    <Column id="departmentColumn" width="15%">
                        <Text id="departmentColumnHeader" text="{i18n>department}"/>
                    </Column>
                    <Column id="teamColumn" width="15%">
                        <Text id="teamColumnHeader" text="{i18n>team}"/>
                    </Column>
                    <Column id="performanceColumn" width="20%">
                        <Text id="performanceColumnHeader" text="{i18n>performanceTrend}"/>
                    </Column>
                    <Column id="actionsColumn" width="10%">
                        <Text id="actionsColumnHeader" text="{i18n>actions}"/>
                    </Column>
                </columns>
                
                <!-- Table Items -->
                <items>
                    <ColumnListItem id="employeeListItem" press="onEmployeePress" type="Active">
                        <cells>
                            <!-- Employee Name with Avatar -->
                            <HBox id="employeeNameCell" alignItems="Center">
                                <Avatar id="employeeAvatar"
                                        displaySize="S"
                                        initials="{parts: ['FirstName', 'LastName'], formatter: '.formatInitials'}"
                                        class="sapUiTinyMarginEnd"/>
                                <VBox id="employeeNameBox">
                                    <Text id="employeeFullName" text="{FirstName} {LastName}" class="sapMText"/>
                                    <Text id="employeeLocation" text="{Location}" class="sapUiContentPadding sapMTextSmall"/>
                                </VBox>
                            </HBox>
                            
                            <!-- Role -->
                            <VBox id="roleCell">
                                <Text id="employeeRole" text="{Role}" class="sapMText"/>
                                <Text id="employeeHireType" text="{HireType}" class="sapMTextSmall"/>
                            </VBox>
                            
                            <!-- Department -->
                            <Text id="employeeDepartment" text="{Department}"/>
                            
                            <!-- Team -->
                            <Text id="employeeTeam" text="{Team}"/>
                            
                            <!-- Performance Trend Indicator -->
                            <HBox id="performanceTrendCell" alignItems="Center">
                                <VBox id="performanceTrendBox">
                                    <!-- Performance Score -->
                                    <HBox id="performanceScoreBox" alignItems="Center">
                                        <Text id="performanceScore" 
                                              text="{parts: ['PerformanceMetrics'], formatter: '.formatLatestPerformance'}"
                                              class="sapMText"/>
                                        <core:Icon id="performanceTrendIcon"
                                                   src="{parts: ['PerformanceMetrics'], formatter: '.formatPerformanceTrendIcon'}"
                                                   color="{parts: ['PerformanceMetrics'], formatter: '.formatPerformanceTrendColor'}"
                                                   class="sapUiTinyMarginBegin"/>
                                    </HBox>
                                    
                                    <!-- Mini Sparkline Placeholder -->
                                    <HBox id="sparklineBox" class="sapUiTinyMarginTop">
                                        <Text id="sparklinePlaceholder"
                                              text="{parts: ['PerformanceMetrics'], formatter: '.formatSparklinePlaceholder'}"
                                              class="sapMTextSmall"/>
                                    </HBox>
                                    
                                    <!-- Satisfaction Indicator -->
                                    <HBox id="satisfactionBox" alignItems="Center" class="sapUiTinyMarginTop">
                                        <core:Icon id="satisfactionIcon"
                                                   src="sap-icon://smiley"
                                                   color="{parts: ['SurveyResponses'], formatter: '.formatSatisfactionColor'}"
                                                   size="0.75rem"/>
                                        <Text id="satisfactionScore"
                                              text="{parts: ['SurveyResponses'], formatter: '.formatLatestSatisfaction'}"
                                              class="sapMTextSmall sapUiTinyMarginBegin"/>
                                    </HBox>
                                </VBox>
                            </HBox>
                            
                            <!-- Actions -->
                            <HBox id="actionsCell">
                                <Button id="viewDetailsBtn"
                                        icon="sap-icon://detail-view"
                                        tooltip="{i18n>viewDetails}"
                                        press="onViewEmployeeDetails"
                                        type="Transparent"/>
                                <Button id="editEmployeeBtn"
                                        icon="sap-icon://edit"
                                        tooltip="{i18n>edit}"
                                        press="onEditEmployee"
                                        type="Transparent"/>
                            </HBox>
                        </cells>
                    </ColumnListItem>
                </items>
                
                <!-- No Data Text -->
                <noData>
                    <IllustratedMessage id="noEmployeesMessage"
                                        illustrationType="sapIllus-EmptyList"
                                        title="{i18n>noEmployeesFound}"
                                        description="{i18n>noEmployeesDescription}"/>
                </noData>
                
            </Table>
        </content>
        
        <!-- Footer with Summary Info -->
        <footer>
            <Toolbar id="employeeListFooter">
                <Text id="employeeCountText" text="{employeeList>/summaryText}"/>
                <ToolbarSpacer id="employeeListFooterSpacer"/>
                <Button id="exportEmployeesBtn"
                        icon="sap-icon://excel-attachment"
                        text="{i18n>export}"
                        press="onExportEmployees"
                        type="Default"/>
            </Toolbar>
        </footer>
        
    </Page>
</mvc:View>
